
ğŸ“¦ PROYECTO MIGRADO A VPS â€“ RESUMEN COMPLETO

âœ… Â¿QUÃ‰ SE MIGRÃ“?
- Proyecto Angular frontend (`tienda-muebles`)
- Sistema backend PHP (registro, login, conexiÃ³n MySQL)
- Base de datos con tabla `usuarios`
- Sistema de pagos con Stripe
- phpMyAdmin para gestiÃ³n visual de MySQL
- Variables de entorno `.env`
- ConfiguraciÃ³n de seguridad con Nginx

ğŸ“ ESTRUCTURA FINAL EN EL VPS:
/var/www/
â”œâ”€â”€ angular-app/            <-- Frontend compilado de Angular
â”‚   â”œâ”€â”€ index.html, js, css
â”‚   â”œâ”€â”€ index.php
â”‚   â”œâ”€â”€ api/                <-- API segura de Stripe
â”‚   â”‚   â”œâ”€â”€ stripe_checkout.php
â”‚   â”‚   â”œâ”€â”€ .env            <-- âœ… Clave secreta Stripe protegida
â”‚   â”‚   â””â”€â”€ vendor/         <-- LibrerÃ­a stripe-php (via Composer)
â”‚   â”œâ”€â”€ api_login.php
â”‚   â”œâ”€â”€ api_registro.php
â”‚   â”œâ”€â”€ success.html
â”‚   â””â”€â”€ cancel.html
â””â”€â”€ backend/                <-- Backend protegido solo para PHP interno
    â”œâ”€â”€ login_usuario.php
    â”œâ”€â”€ registro_usuario.php
    â”œâ”€â”€ conexion.php

ğŸ” SEGURIDAD IMPLEMENTADA:
- `/backend/` bloqueado completamente
- Solo `/api/stripe_checkout.php` accesible pÃºblicamente
- Archivos ocultos como `.env` protegidos por Nginx
- Angular usa `try_files` para rutas SPA
- phpMyAdmin habilitado correctamente

ğŸ”‘ CLAVE STRIPE SEGURA:
- `.env` ubicado en: `/var/www/angular-app/api/.env`
- Accedido mediante `Dotenv::createImmutable(__DIR__)`
- No expuesta al frontend
- Protegida por Nginx (`location ~ /\.`)
- Permisos seguros: `chmod 640`, `chown www-data`

âœ… FUNCIONALIDADES ACTIVAS:
- Registro y login de usuarios
- ProtecciÃ³n CSRF activa
- Cierre de sesiÃ³n
- Perfil de usuario
- Carrito de compras Angular
- Pagos Stripe (modo test)
- Redirecciones `success.html` y `cancel.html`
- phpMyAdmin para gestiÃ³n de MySQL

ğŸ›  SIGUIENTES PASOS RECOMENDADOS:
- Configurar HTTPS (Let's Encrypt o dominio de IONOS)
- Pasar a modo live en Stripe
- Cargar productos desde base de datos (opcional)
- Refuerzo de seguridad: CORS, Firewall, Rate Limits

ğŸ¯ Â¡Todo funcionando, seguro y listo para producciÃ³n!
